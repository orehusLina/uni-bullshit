Наконец, реализуем освобождение выделенной региону памяти с помощью функции
\verb|arena_free|

\begin{minted}{cpp}
void arena_free (arena* arena) { 
    if (arena->arena != NULL) 
        free(arena->arena);
    arena->arena = NULL; 
}
\end{minted}

\subsubsection{Модификация абстрактного синтаксического дерева}
Осталось изменить исходный код программы, чтобы обеспечить выделение памяти с
помощью полученной нами структуры данных.

Для этого воспользуемся директивой \verb|%param| и заявим в качестве параметра
переменную типа \verb|arena*|. В функциях \verb|eval|, \verb|newnum|,
\verb|newast| внесем изменения, чтобы обеспечить выделение памятью с помощью
написанных ранее функций.

С полным кодом программы можно ознакомиться в приложении А.